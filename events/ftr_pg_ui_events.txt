
namespace = ftr_pg_ui_event

ftr_pg_ui_event.0001 = {
	type = character_event
	title = ftr_pg_ui_event.0001.t
	desc = ftr_pg_ui_event.0001.desc
	theme = realm
	left_portrait = {
		character = root
	}

	option = { # 吹嘘政绩
		name = ftr_pg_ui_event.0001.a
		trigger = {
			prestige > ftr_expand_influence_prestige_cost_value
			diplomacy >= 10
		}
		add_prestige = ftr_expand_influence_prestige_modify_value
		ftr_add_political_influence_effect = {
			VALUE = ftr_expand_influence_value
		}
		custom_description = {
			text = "ftr_flag_expanded_influence_recently_tt"
			add_character_flag = {
				flag = ftr_expand_influence_flag
				days = 730
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				add = -40
				has_trait = shy
			}
		}
	}
	option = { # 宣传美德
		name = ftr_pg_ui_event.0001.b
		trigger = {
			piety > ftr_expand_influence_piety_cost_value
		}
		add_piety = ftr_expand_influence_piety_modify_value
		ftr_add_political_influence_effect = {
			VALUE = ftr_expand_influence_value
		}
		custom_description = {
			text = "ftr_flag_expanded_influence_recently_tt"
			add_character_flag = {
				flag = ftr_expand_influence_flag
				days = 730
			}
		}
		ai_chance = {
			base = 50
		}
	}
	option = { # 做慈善
		name = ftr_pg_ui_event.0001.c
		trigger = {
			gold > ftr_expand_influence_gold_cost_value
		}
		remove_short_term_gold = ftr_expand_influence_gold_cost_value
		ftr_add_political_influence_effect = {
			VALUE = ftr_expand_influence_value
		}
		custom_description = {
			text = "ftr_flag_expanded_influence_recently_tt"
			add_character_flag = {
				flag = ftr_expand_influence_flag
				days = 730
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				add = -40
				has_trait = greedy
			}
		}
	}
	option = { # 什么也不做
		name = ftr_pg_ui_event.0001.d
		ai_chance = {
			base = 1
		}
	}

	after = {}
}

# Change My Realm Political Focus
ftr_pg_ui_event.0002 = {
	type = character_event
	title = ftr_pg_ui_event.0002.t
	desc = ftr_pg_ui_event.0002.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {
		if = {
			limit = { NOT = { exists = var:ftr_pg_focus } }
			set_variable = {
				name = ftr_pg_focus
				value = 0
			}
		}
	}

	option = { # 王权
		name = ftr_pg_ui_event.0002.a
		trigger = {
			NOT = {
				var:ftr_pg_focus = 1
			}
		}
		ftr_submit_change_foucus_effect = {
			LIEGE = root
			STARTER = root
			VALUE = 1
		}
		ftr_try_change_my_focus_effect = yes
		ai_chance = {
			base = 10
			modifier = { # Crown Athority too low, I want to make it higher
				add = 40
				OR = {
					has_realm_law = crown_authority_0
					has_realm_law = tribal_authority_0
				}
			}
			modifier = { # Crown Athority is enough, don't make any trouble
				add = -10
				OR = {
					has_realm_law = crown_authority_2
					has_realm_law = crown_authority_3
					has_realm_law = tribal_authority_2
					has_realm_law = tribal_authority_3
				}
			}
		}
	}

	option = { # 文化
		name = ftr_pg_ui_event.0002.b
		trigger = {
			NOT = {
				var:ftr_pg_focus = 2
			}
		}
		ftr_submit_change_foucus_effect = {
			LIEGE = root
			STARTER = root
			VALUE = 2
		}
		ftr_try_change_my_focus_effect = yes
		ai_chance = { # I have vassals in different culture
			base = 10
			modifier = {
				add = 10
				OR = {
					any_vassal = {
						count >= 2
						NOT = {
							culture = root.culture
						}
					}
					any_vassal = {
						count >= 2
						NOT = {
							religion = root.religion
						}
					}
				}
			}
		}
	}

	option = { # 国家安全
		name = ftr_pg_ui_event.0002.c
		trigger = {
			NOT = {
				var:ftr_pg_focus = 3
			}
		}
		ftr_submit_change_foucus_effect = {
			LIEGE = root
			STARTER = root
			VALUE = 3
		}
		ftr_try_change_my_focus_effect = yes
		ai_chance = { # AI liege likes this topic
			base = 30
		}
	}

	option = { # default
		name = ftr_pg_ui_event.0002.00
	}

	after = {}
}

# Vote for change focus
ftr_pg_ui_event.0003 = {
	type = character_event
	title = ftr_pg_ui_event.0003.t
	desc = ftr_pg_ui_event.0003.desc
	theme = realm
	left_portrait = {
		character = root
	}
	
	option = { # 同意
		name = ftr_pg_ui_event.0003.a
		trigger = {
			ftr_political_influence_value >= ftr_vote_focus_cost_value
		}
		ftr_add_political_influence_effect = {
			VALUE = ftr_vote_focus_modify_value
		}
		custom_description = {
			text = "ftr_change_focus_vote_approve_tt"
			scope:liege_c = {
				change_variable = {
					name = ftr_focus_vote_approve
					add = 1
				}
			}
		}
		ai_chance = {
			base = 50
		}
	}
	option = { # 反对
		name = ftr_pg_ui_event.0003.b
		trigger = {
			ftr_political_influence_value >= ftr_vote_focus_cost_value
		}
		ftr_add_political_influence_effect = {
			VALUE = ftr_vote_focus_modify_value
		}
		custom_description = {
			text = "ftr_change_focus_vote_oppose_tt"
			scope:liege_c = {
				change_variable = {
					name = ftr_focus_vote_oppose
					add = 1
				}
			}
		}
		ai_chance = {
			base = 100
			opinion_modifier = {
				who = root
				opinion_target = scope:starter
				multiplier = -1
			}
		}
	}
	option = { # 不表态
		name = ftr_pg_ui_event.0003.c
		ai_chance = {
			base = 100
		}
	}
}

# Vote result of changing focus
ftr_pg_ui_event.0004 = {
	type = character_event
	title = ftr_pg_ui_event.0004.t
	desc = ftr_pg_ui_event.0004.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {
		if = {
			limit = {
				scope:liege_c = {
					var:ftr_focus_vote_approve > var:ftr_focus_vote_oppose
				}
			}
			ftr_change_realm_political_focus_effect = {
				LIEGE = scope:liege_c
				STARTER = root
				VALUE = scope:ftr_political_focus_tobe
			}
			hidden_effect = {
				ftr_change_focus_result_notify_effect = {
					LIEGE = scope:liege_c
					STARTER = root
					SUCCESS = 1
					VALUE = scope:ftr_political_focus_tobe
				}
			}
		}
		else = {
			custom_description = {
				text = "ftr_change_focus_failed_tt"
			}
			hidden_effect = {
				ftr_change_focus_result_notify_effect = {
					LIEGE = scope:liege_c
					STARTER = root
					SUCCESS = 0
					VALUE = scope:ftr_political_focus_tobe
				}
			}
		}
	}
	
	option = {
		name = ftr_pg_ui_event.0004.a
	}

	after = {
		scope:liege_c = {
			remove_character_flag = ftr_changing_focus_flag
			set_variable = {
				name = ftr_focus_vote_approve
				value = 0
			}
			set_variable = {
				name = ftr_focus_vote_oppose
				value = 0
			}
		}
	}
}

# Change Liege Realm Political Focus
ftr_pg_ui_event.0005 = {
	type = character_event
	title = ftr_pg_ui_event.0005.t
	desc = ftr_pg_ui_event.0005.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {
		liege = {
			if = {
				limit = { NOT = { exists = var:ftr_pg_focus } }
				set_variable = {
					name = ftr_pg_focus
					value = 0
				}
			}
		}
	}

	option = { # 王权
		name = ftr_pg_ui_event.0002.a
		trigger = {
			liege = {
				NOT = { var:ftr_pg_focus = 1 }
			}
		}
		ftr_submit_change_foucus_effect = {
			LIEGE = liege
			STARTER = root
			VALUE = 1
		}
		ftr_try_change_liege_focus_effect = yes
		ai_chance = { # ai subjects like this topic
			base = 15
		}
	}

	option = { # 文化
		name = ftr_pg_ui_event.0002.b
		trigger = {
			liege = {
				NOT = { var:ftr_pg_focus = 2 }
			}
		}
		ftr_submit_change_foucus_effect = {
			LIEGE = liege
			STARTER = root
			VALUE = 2
		}
		ftr_try_change_liege_focus_effect = yes
		ai_chance = {
			base = 10
		}
	}

	option = { # 国家安全
		name = ftr_pg_ui_event.0002.c
		trigger = {
			liege = {
				NOT = { var:ftr_pg_focus = 3 }
			}
		}
		ftr_submit_change_foucus_effect = {
			LIEGE = liege
			STARTER = root
			VALUE = 3
		}
		ftr_try_change_liege_focus_effect = yes
		ai_chance = {
			base = 10
		}
	}

	option = { # default
		name = ftr_pg_ui_event.0002.00
	}

	after = {}
}

# Make proposal list
ftr_pg_ui_event.0100 = {
	type = character_event
	title = ftr_pg_ui_event.0100.t
	desc = ftr_pg_ui_event.0100.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {}
	
	option = { # Expansion of royal power
		name = ftr_pg_ui_event.0100.1
		trigger = {
			scope:liege_c = {
				exists = var:ftr_pg_focus
				OR = {
					var:ftr_pg_focus = 1 # 王权
					var:ftr_pg_focus = 3 # 安全
				}
				OR = {
					ftr_can_pass_crown_authority_1 = yes
					ftr_can_pass_crown_authority_2 = yes
					ftr_can_pass_crown_authority_3 = yes
					ftr_can_pass_tribe_authority_1 = yes
					ftr_can_pass_tribe_authority_2 = yes
					ftr_can_pass_tribe_authority_3 = yes
				}
			}
		}
		ftr_try_make_proposal_effect = yes
		scope:starter = {
			if = {
				limit = { NOT = { this = scope:liege_c } }
				set_variable = {
					name = ftr_liege_proposal_attitude
					value = 1 # 支持
				}
			}
			else = {
				set_variable = {
					name = ftr_my_proposal_attitude
					value = 1 # 支持
				}
			}
		}
		scope:liege_c = {
			set_variable = {
				name = ftr_proposal_type
				value = 1 # 提升君权
			}
			every_in_list = {
				list = powerful_subject_list
				hidden_effect = {
					send_interface_message = {
						title = "ftr_make_proposal_tt"
						left_icon = scope:starter
						right_icon = scope:liege_c
						custom_description = {
							text = "ftr_expand_authority_proposal_notify_tt"
							subject = scope:starter
							object = scope:liege_c
						}
					}
				}
			}
			trigger_event = {
				id = ftr_pg_ui_event.0201 # Make final decision
				days = 90
			}
		}
		ai_chance = {
			base = 0
			modifier = { # liege want to expand his power
				add = 100
				scope:liege_c = root
			}
			modifier = { # loyal vassal help liege
				add = 20
				NOT = { scope:liege_c = root }
				opinion = {
					target = scope:liege_c
					value >= 90
				}
				scope:liege_c = {
					OR = {
						has_realm_law = crown_authority_0
						has_realm_law = crown_authority_1
						has_realm_law = tribal_authority_0
						has_realm_law = tribal_authority_1
					}
				}
			}
		}
	}

	option = { # Weaken of royal power
		name = ftr_pg_ui_event.0100.2
		trigger = {
			scope:liege_c = {
				exists = var:ftr_pg_focus
				OR = {
					var:ftr_pg_focus = 1 # 王权
				}
				NOT = {
					OR = {
						has_realm_law = crown_authority_0
						has_realm_law = tribal_authority_0
					}
				}
				NOT = {
					has_variable = crown_authority_cooldown
				}
			}
		}
		ftr_try_make_proposal_effect = yes
		scope:starter = {
			if = {
				limit = { NOT = { this = scope:liege_c } }
				set_variable = {
					name = ftr_liege_proposal_attitude
					value = 1 # 支持
				}
			}
			else = {
				set_variable = {
					name = ftr_my_proposal_attitude
					value = 1 # 支持
				}
			}
		}
		scope:liege_c = {
			set_variable = {
				name = ftr_proposal_type
				value = 2 # 降低君权
			}
			every_in_list = {
				list = powerful_subject_list
				hidden_effect = {
					send_interface_message = {
						title = "ftr_make_proposal_tt"
						left_icon = scope:starter
						right_icon = scope:liege_c
						custom_description = {
							text = "ftr_weaken_authority_proposal_notify_tt"
							subject = scope:starter
							object = scope:liege_c
						}
					}
				}
			}
			trigger_event = {
				id = ftr_pg_ui_event.0202 # Make final decision
				days = 90
			}
		}
		ai_chance = {
			base = 0
			modifier = { # liege don't want to weaken his power
				add = -100
				scope:liege_c = root
			}
			modifier = { # disloyal vassal try to weaken liege
				add = 20
				NOT = { scope:liege_c = root }
				opinion = {
					target = scope:liege_c
					value < 60
				}
				scope:liege_c = {
					OR = {
						has_realm_law = crown_authority_2
						has_realm_law = crown_authority_3
						has_realm_law = tribal_authority_2
						has_realm_law = tribal_authority_3
					}
				}
			}
		}
	}

	option = { # Purge heresy
		name = ftr_pg_ui_event.0100.3
		trigger = {
			scope:liege_c = {
				exists = var:ftr_pg_focus
				OR = {
					var:ftr_pg_focus = 2
					var:ftr_pg_focus = 3
				}
				OR = {
					any_realm_county = {
						NOT = { faith = scope:liege_c.faith }
					}
					any_vassal = {
						NOT = { faith = scope:liege_c.faith }
					}
				}
				NOT = {
					OR = {
						has_character_modifier = ftr_purge_heresy_modifier
						has_character_modifier = ftr_faith_tolerance_modifier
					}
				}
			}
		}
		ftr_try_make_proposal_effect = yes
		scope:liege_c = {
			set_variable = {
				name = ftr_proposal_type
				value = 3 # 清洗异端
			}
			every_in_list = {
				list = powerful_subject_list
				hidden_effect = {
					send_interface_message = {
						title = "ftr_make_proposal_tt"
						left_icon = scope:starter
						right_icon = scope:liege_c
						custom_description = {
							text = "ftr_purge_heresy_proposal_notify_tt"
							subject = scope:starter
							object = scope:liege_c
						}
					}
				}
			}
			trigger_event = {
				id = ftr_pg_ui_event.0203 # Make final decision
				days = 90
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 50
				faith = scope:liege_c.faith
				has_trait = zealous
			}
			modifier = {
				add = -50
				NOT = { faith = scope:liege_c.faith }
			}
		}
	}

	option = { # Religious Tolerance
		name = ftr_pg_ui_event.0100.4
		trigger = {
			scope:liege_c = {
				exists = var:ftr_pg_focus
				OR = {
					var:ftr_pg_focus = 2
				}
				OR = {
					any_realm_county = {
						NOT = { faith = scope:liege_c.faith }
					}
					any_vassal = {
						NOT = { faith = scope:liege_c.faith }
					}
				}
				NOT = {
					OR = {
						has_character_modifier = ftr_purge_heresy_modifier
						has_character_modifier = ftr_faith_tolerance_modifier
					}
				}
			}
		}
		ftr_try_make_proposal_effect = yes
		scope:liege_c = {
			set_variable = {
				name = ftr_proposal_type
				value = 4 # 宗教宽容
			}
			every_in_list = {
				list = powerful_subject_list
				hidden_effect = {
					send_interface_message = {
						title = "ftr_make_proposal_tt"
						left_icon = scope:starter
						right_icon = scope:liege_c
						custom_description = {
							text = "ftr_religious_tolerance_notify_tt"
							subject = scope:starter
							object = scope:liege_c
						}
					}
				}
			}
			trigger_event = {
				id = ftr_pg_ui_event.0204 # Make final decision
				days = 90
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				add = -50
				faith = scope:liege_c.faith
			}
			modifier = {
				add = 50
				NOT = { faith = scope:liege_c.faith }
			}
		}
	}

	option = { # War Tax
		name = ftr_pg_ui_event.0100.5
		trigger = {
			scope:liege_c = {
				exists = var:ftr_pg_focus
				OR = {
					var:ftr_pg_focus = 3
				}
				is_at_war = yes
				gold < 500
				NOT = { has_character_modifier = enact_war_tax_by_negotiation_modifier }
			}
		}
		ftr_try_make_proposal_effect = yes
		scope:liege_c = {
			set_variable = {
				name = ftr_proposal_type
				value = 5 # 战争税
			}
			every_in_list = {
				list = powerful_subject_list
				hidden_effect = {
					send_interface_message = {
						title = "ftr_make_proposal_tt"
						left_icon = scope:starter
						right_icon = scope:liege_c
						custom_description = {
							text = "ftr_war_tax_notify_tt"
							subject = scope:starter
							object = scope:liege_c
						}
					}
				}
			}
			trigger_event = {
				id = ftr_pg_ui_event.0205 # Make final decision
				days = 90
			}
		}
		ai_chance = {
			base = 0
			opinion_modifier = {
				#trigger = {
				#	NOT = { scope:actor = scope:actor.house.house_head }
				#}
				who = root
				opinion_target = scope:liege_c
				multiplier = 0.5
			}
		}
	}

	# Backup option
	option = {
		name = ftr_pg_ui_event.0100.backup
		ai_chance = {
			base = 1
		}
	}
}

# Expande Crown Authority Result
ftr_pg_ui_event.0201 = {
	type = character_event
	title = ftr_pg_ui_event.0201.t
	desc = ftr_pg_ui_event.0201.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {
		ftr_count_vote_result_effect = yes
	}

	option = { # Agree with result
		name = ftr_pg_ui_event.0201.a
		if = {
			limit = {
				scope:liege_c = {
					var:count_yes > var:count_no
				}
			}
			scope:liege_c = {
				ftr_expand_authority_effect = yes
			}
		}
	}

	option = { # Ignore it
		name = ftr_pg_ui_event.0201.b
		trigger = {
			scope:liege_c = {
				var:count_yes > var:count_no
			}
		}
		every_in_list = {
			list = approve_list
			custom = ftr_pg_ui_event.0201.b.custom_yes
			add_opinion = {
				target = root
				modifier = ftr_disrespect_voting_result_opinion
			}
		}
		every_in_list = {
			list = disapprove_list
			custom = ftr_pg_ui_event.0201.b.custom_no
			add_opinion = {
				target = root
				modifier = ftr_reject_foolish_proposal_opinion
			}
		}
	}

	after = {
		ftr_clear_vote_result_effect = yes
	}
}

# Weaken Crown Authority Result
ftr_pg_ui_event.0202 = {
	type = character_event
	title = ftr_pg_ui_event.0202.t
	desc = ftr_pg_ui_event.0202.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {
		ftr_count_vote_result_effect = yes
	}

	option = { # Agree with result
		name = ftr_pg_ui_event.0202.a
		if = {
			limit = {
				scope:liege_c = {
					var:count_yes > var:count_no
				}
			}
			scope:liege_c = {
				ftr_decrease_authority_effect = yes
			}
		}
	}

	option = { # Ignore it
		name = ftr_pg_ui_event.0202.b
		trigger = {
			scope:liege_c = {
				var:count_yes > var:count_no
			}
		}
		every_in_list = {
			list = approve_list
			custom = ftr_pg_ui_event.0201.b.custom_yes
			add_opinion = {
				target = root
				modifier = ftr_disrespect_voting_result_opinion
			}
		}
		every_in_list = {
			list = disapprove_list
			custom = ftr_pg_ui_event.0201.b.custom_no
			add_opinion = {
				target = root
				modifier = ftr_reject_foolish_proposal_opinion
			}
		}
	}

	after = {
		ftr_clear_vote_result_effect = yes
	}
}

# Purge Heresy Result
ftr_pg_ui_event.0203 = {
	type = character_event
	title = ftr_pg_ui_event.0203.t
	desc = ftr_pg_ui_event.0203.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {
		ftr_count_vote_result_effect = yes
	}

	option = { # Agree with result
		name = ftr_pg_ui_event.0203.a
		if = {
			limit = {
				scope:liege_c = {
					var:count_yes > var:count_no
				}
			}
			scope:liege_c = {
				add_character_modifier = {
					modifier = ftr_purge_heresy_modifier
					years = 10
				}
				custom_description = {
					text = "ftr_purge_heresy_in_counties_tt"
					every_realm_county = {
						limit = {
							holder = scope:liege_c
							NOT = { faith = scope:liege_c.faith }
						}
						save_scope_as = current_county
						random_list = {
							0 = {
								modifier = {
									add = {
										value = scope:liege_c.martial
										multiply = 2
									}
								}
								scope:liege_c = {
									send_interface_message = {
										title = "ftr_purge_heresy_succ_tt"
										left_icon = scope:liege_c
										right_icon = scope:current_county
										scope:current_county = {
											set_county_faith = scope:liege_c.faith
										}
									}
								}
							}
							50 = {
								scope:liege_c = {
									send_interface_message = {
										title = "ftr_purge_heresy_fail_tt"
										left_icon = scope:liege_c
										right_icon = scope:current_county
										scope:current_county = {
											add_county_modifier = {
												modifier = ftr_try_purge_heresy_modifier
												years = 5
											}
										}
									}
								}
							}
						}
					}
				}
				custom_description = {
					text = "ftr_purge_heresy_amoung_vassals_tt"
					every_vassal = {
						limit = {
							NOT = { faith = scope:liege_c.faith }
						}
						trigger_event = {
							id = ftr_pg_ui_event.0300
							days = 10
						}
					}
				}
			}
		}
	}

	option = { # Ignore it
		name = ftr_pg_ui_event.0203.b
		trigger = {
			scope:liege_c = {
				var:count_yes > var:count_no
			}
		}
		every_in_list = {
			list = approve_list
			custom = ftr_pg_ui_event.0201.b.custom_yes
			add_opinion = {
				target = root
				modifier = ftr_disrespect_voting_result_opinion
			}
		}
		every_in_list = {
			list = disapprove_list
			custom = ftr_pg_ui_event.0201.b.custom_no
			add_opinion = {
				target = root
				modifier = ftr_reject_foolish_proposal_opinion
			}
		}
	}

	after = {
		ftr_clear_vote_result_effect = yes
	}
}

# Religious Tolerance Result
ftr_pg_ui_event.0204 = {
	type = character_event
	title = ftr_pg_ui_event.0204.t
	desc = ftr_pg_ui_event.0204.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {
		ftr_count_vote_result_effect = yes
	}

	option = { # Agree with result
		name = ftr_pg_ui_event.0204.a
		if = {
			limit = {
				scope:liege_c = {
					var:count_yes > var:count_no
				}
			}
			scope:liege_c = {
				add_character_modifier = {
					modifier = ftr_faith_tolerance_modifier
					years = 10
				}
			}
		}
	}

	option = { # Ignore it
		name = ftr_pg_ui_event.0204.b
		trigger = {
			scope:liege_c = {
				var:count_yes > var:count_no
			}
		}
		every_in_list = {
			list = approve_list
			custom = ftr_pg_ui_event.0201.b.custom_yes
			add_opinion = {
				target = root
				modifier = ftr_disrespect_voting_result_opinion
			}
		}
		every_in_list = {
			list = disapprove_list
			custom = ftr_pg_ui_event.0201.b.custom_no
			add_opinion = {
				target = root
				modifier = ftr_reject_foolish_proposal_opinion
			}
		}
	}

	after = {
		ftr_clear_vote_result_effect = yes
	}
}

# War Tax Result
ftr_pg_ui_event.0205 = {
	type = character_event
	title = ftr_pg_ui_event.0205.t
	desc = ftr_pg_ui_event.0205.desc
	theme = realm
	left_portrait = {
		character = root
	}

	immediate = {
		ftr_count_vote_result_effect = yes
	}

	option = { # Agree with result
		name = ftr_pg_ui_event.0205.a
		if = {
			limit = {
				scope:liege_c = {
					var:count_yes > var:count_no
				}
			}
			scope:liege_c = {
				add_character_modifier = {
					modifier = enact_war_tax_by_negotiation_modifier
					years = 5
				}
			}
		}
	}

	option = { # Ignore it
		name = ftr_pg_ui_event.0205.b
		trigger = {
			scope:liege_c = {
				var:count_yes > var:count_no
			}
		}
	}

	after = {
		ftr_clear_vote_result_effect = yes
	}
}

# Liege demand to convert
ftr_pg_ui_event.0300 = {
	type = character_event
	title = ftr_pg_ui_event.0300.t
	desc = ftr_pg_ui_event.0300.desc
	theme = realm
	left_portrait = {
		character = root
	}
	right_portrait = {
		character = scope:liege_c
	}

	option = { # Agree
		name = ftr_pg_ui_event.0300.a
		set_character_faith = scope:liege_c.faith
		scope:liege_c = {
			send_interface_message = {
				title = "ftr_pg_ui_event.0300.agree_tt"
				left_icon = root
			}
		}
	}
	option = { # Refuse
		name = ftr_pg_ui_event.0300.b
		scope:liege_c = {
			send_interface_message = {
				title = "ftr_pg_ui_event.0300.disagree_tt"
				left_icon = root
			}
			add_opinion = {
				target = root
				modifier = illegal_resisted_conversion_opinion
				years = 10
			}
		}
	}
	option = { # Politely Refuse
		name = ftr_pg_ui_event.0300.c
		trigger = {
			diplomacy >= 12
		}
		scope:liege_c = {
			send_interface_message = {
				title = "ftr_pg_ui_event.0300.disagree_politely_tt"
				left_icon = root
			}
		}
	}
}

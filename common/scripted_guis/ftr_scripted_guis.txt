

ftr_expand_influence = {
	scope = character
	is_valid = {
		prestige >= 500
		custom_description = {
			text = "ftr_not_expanded_influence_recently_tt"
			NOT = {
				has_character_flag = ftr_expand_influence_flag
			}
		}
	}
	effect = {
		add_prestige = ftr_expand_influence_prestige_cost_value
		ftr_add_political_influence_effect = {
			VALUE = ftr_expand_influence_value
		}
		custom_description = {
			text = "ftr_flag_expanded_influence_recently_tt"
			add_character_flag = {
				flag = ftr_expand_influence_flag
				days = 730
			}
		}
	}
}

ftr_update_my_powerful_subject_list = {
	scope = character
	effect = {
		clear_variable_list = ftr_my_powerful_subject_list
		every_vassal = {
			limit = { 
				is_powerful_vassal = yes
			}
			save_scope_as = current_powerful_vassal
			root = {
				add_to_variable_list = {
					name = ftr_my_powerful_subject_list
					target = scope:current_powerful_vassal
				}
			}
		}
		every_councillor = {
			limit = {
				is_powerful_vassal = no
			}
			save_scope_as = current_councillor
			root = {
				add_to_variable_list = {
					name = ftr_my_powerful_subject_list
					target = scope:current_councillor
				}
			}
		}
	}
}

ftr_update_my_realm_pg_participants_list = {
	scope = character
	effect = {
		clear_variable_list = ftr_my_realm_pg_participants_list
		every_vassal = {
			save_scope_as = current_vassal
			root = {
				add_to_variable_list = {
					name = ftr_my_realm_pg_participants_list
					target = scope:current_vassal
				}
			}
		}
		every_courtier = {
			limit = {
				is_landed = no
				OR = {
					is_councillor_of = root
					house = root.house
				}
			}
			save_scope_as = current_courtier
			root = {
				add_to_variable_list = {
					name = ftr_my_realm_pg_participants_list
					target = scope:current_courtier
				}
			}
		}
	}
}

ftr_update_liege_powerful_subject_list = {
	scope = character
	effect = {}
}
